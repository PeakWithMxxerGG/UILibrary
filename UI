local UILib = {}
local TweenService = game:GetService("TweenService")

function UILib:Init()
    if game.CoreGui:FindFirstChild("SigmaUI") then
        game.CoreGui.SigmaUI:Destroy()
    end

    local SigmaUI = Instance.new("ScreenGui")
    SigmaUI.Name = "SigmaUI"
    SigmaUI.Parent = game.CoreGui
    
    local Library = {}
    
    function Library:CreateWindow(title)
        local Window = Instance.new("Frame")
        Window.Name = "Window"
        Window.Parent = SigmaUI
        Window.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
        Window.Position = UDim2.new(0.5, -150, 0.5, -100)
        Window.Size = UDim2.new(0, 300, 0, 250)
        Window.Active = true
        Window.Draggable = true
        
        local UICorner = Instance.new("UICorner")
        UICorner.CornerRadius = UDim.new(0, 6)
        UICorner.Parent = Window
        
        local Title = Instance.new("TextLabel")
        Title.Name = "Title"
        Title.Parent = Window
        Title.BackgroundTransparency = 1
        Title.Position = UDim2.new(0, 0, 0, 5)
        Title.Size = UDim2.new(1, 0, 0, 30)
        Title.Font = Enum.Font.GothamBold
        Title.Text = title
        Title.TextColor3 = Color3.fromRGB(255, 255, 255)
        Title.TextSize = 22
        
        local CloseButton = Instance.new("TextButton")
        CloseButton.Name = "CloseButton"
        CloseButton.Parent = Window
        CloseButton.BackgroundTransparency = 1
        CloseButton.Position = UDim2.new(1, -30, 0, 5)
        CloseButton.Size = UDim2.new(0, 25, 0, 25)
        CloseButton.Font = Enum.Font.GothamBold
        CloseButton.Text = "X"
        CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        CloseButton.TextSize = 16
        
        local Container = Instance.new("Frame")
        Container.Name = "Container"
        Container.Parent = Window
        Container.BackgroundTransparency = 1
        Container.Position = UDim2.new(0, 10, 0, 45)
        Container.Size = UDim2.new(1, -20, 1, -55)
        
        local UIListLayout = Instance.new("UIListLayout")
        UIListLayout.Parent = Container
        UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
        UIListLayout.Padding = UDim.new(0, 5)
        
        local WindowFuncs = {}
        
        function WindowFuncs:CreateButton(text, callback)
            local Button = Instance.new("TextButton")
            Button.Name = "Button"
            Button.Parent = Container
            Button.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
            Button.Size = UDim2.new(1, 0, 0, 40)
            Button.Font = Enum.Font.GothamSemibold
            Button.Text = text
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.TextSize = 16
            Button.AutoButtonColor = false
            
            local UICorner = Instance.new("UICorner")
            UICorner.CornerRadius = UDim.new(0, 6)
            UICorner.Parent = Button
            
            local hover = TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(60, 60, 60)})
            local unhover = TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(45, 45, 45)})
            
            Button.MouseEnter:Connect(function() hover:Play() end)
            Button.MouseLeave:Connect(function() unhover:Play() end)
            Button.MouseButton1Click:Connect(callback)
            
            return Button
        end
        
        function WindowFuncs:CreateToggle(text, callback)
            local Toggle = Instance.new("TextButton")
            Toggle.Name = "Toggle"
            Toggle.Parent = Container
            Toggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
            Toggle.Size = UDim2.new(1, 0, 0, 40)
            Toggle.Font = Enum.Font.GothamSemibold
            Toggle.Text = text
            Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
            Toggle.TextSize = 16
            Toggle.AutoButtonColor = false
            
            local UICorner = Instance.new("UICorner")
            UICorner.CornerRadius = UDim.new(0, 6)
            UICorner.Parent = Toggle
            
            local enabled = false
            
            Toggle.MouseButton1Click:Connect(function()
                enabled = not enabled
                Toggle.BackgroundColor3 = enabled and Color3.fromRGB(0, 120, 255) or Color3.fromRGB(45, 45, 45)
                callback(enabled)
            end)
            
            return Toggle
        end
        
        CloseButton.MouseEnter:Connect(function()
            CloseButton.TextColor3 = Color3.fromRGB(255, 50, 50)
        end)
        
        CloseButton.MouseLeave:Connect(function()
            CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        end)
        
        CloseButton.MouseButton1Click:Connect(function()
            SigmaUI:Destroy()
        end)
        
        return WindowFuncs
    end
    
    return Library
end

return UILib
